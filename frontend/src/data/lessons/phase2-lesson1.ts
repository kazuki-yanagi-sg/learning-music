/**
 * Phase 2 - Lesson 2.1: メジャースケール
 *
 * 学ぶこと:
 * - スケール = 使う音のパレット
 * - メジャースケールの距離パターン [0, 2, 4, 5, 7, 9, 11]
 * - 移調の考え方
 */
import { Lesson } from '../../types/lesson'

export const phase2Lesson1: Lesson = {
  id: 'phase2-lesson1',
  phaseId: 2,
  lessonNumber: 1,
  title: 'メジャースケール',
  description: '明るい曲の音のパレットを理解する',
  estimatedMinutes: 25,
  prerequisites: ['phase1-lesson2'],
  steps: [
    {
      id: 'step1',
      type: 'theory',
      title: 'スケールとは',
      content: `<strong>スケール</strong>とは、曲で使う音の「パレット」です。

12音すべてを使うと統一感がなくなります。
スケールは「この曲ではこの7音を中心に使う」という約束事です。

絵で例えると：
- 12音 = 絵の具すべて
- スケール = 今回の絵で使う7色

<strong>スケールの効果:</strong>
- 曲に統一感が出る
- 「らしさ」が生まれる
- 和音と相性の良い音がわかる`,
    },
    {
      id: 'step2',
      type: 'theory',
      title: 'メジャースケールの構造',
      content: `<strong>メジャースケール</strong>は最も基本的なスケールです。

基準音を 0 とした場合の距離パターン：
<strong>[0, 2, 4, 5, 7, 9, 11]</strong>

7つの音で構成されています。

距離の間隔を見ると：
0 → 2: 距離2
2 → 4: 距離2
4 → 5: 距離1
5 → 7: 距離2
7 → 9: 距離2
9 → 11: 距離2
11 → 12(0): 距離1

パターン: <strong>2-2-1-2-2-2-1</strong>

「全全半全全全半」とも呼ばれます。`,
    },
    {
      id: 'step3',
      type: 'quiz',
      title: '確認クイズ：メジャースケール',
      content: 'メジャースケールの構造を確認しましょう。',
      question: '基準音 0 のメジャースケールに含まれる音は？',
      options: [
        '[0, 1, 2, 3, 4, 5, 6]',
        '[0, 2, 4, 5, 7, 9, 11]',
        '[0, 2, 3, 5, 7, 8, 10]',
        '[0, 1, 3, 5, 6, 8, 10]',
      ],
      correctIndex: 1,
      explanation: 'メジャースケールは [0, 2, 4, 5, 7, 9, 11] です。2-2-1-2-2-2-1 のパターンで覚えましょう。',
    },
    {
      id: 'step4',
      type: 'theory',
      title: '移調したメジャースケール',
      content: `基準音を変えると、スケールも移動します。

<strong>基準音 0:</strong> [0, 2, 4, 5, 7, 9, 11]
<strong>基準音 5:</strong> [5, 7, 9, 10, 0, 2, 4]（各音 +5, mod 12）
<strong>基準音 7:</strong> [7, 9, 11, 0, 2, 4, 6]（各音 +7, mod 12）

計算方法：
元のパターン [0, 2, 4, 5, 7, 9, 11] に基準音を足す

例：基準音 5 の場合
[0+5, 2+5, 4+5, 5+5, 7+5, 9+5, 11+5]
= [5, 7, 9, 10, 12, 14, 16]
= [5, 7, 9, 10, 0, 2, 4]（mod 12）`,
    },
    {
      id: 'step5',
      type: 'quiz',
      title: '確認クイズ：移調',
      content: 'スケールの移調を計算しましょう。',
      question: '基準音 2 のメジャースケールに含まれる音は？',
      options: [
        '[2, 4, 6, 7, 9, 11, 1]',
        '[2, 4, 5, 7, 9, 10, 0]',
        '[2, 3, 5, 7, 8, 10, 0]',
        '[2, 4, 6, 8, 10, 0, 2]',
      ],
      correctIndex: 0,
      explanation: '[0, 2, 4, 5, 7, 9, 11] + 2 = [2, 4, 6, 7, 9, 11, 13]。13 mod 12 = 1 なので [2, 4, 6, 7, 9, 11, 1]。',
    },
    {
      id: 'step6',
      type: 'exercise',
      title: '実践：メジャースケールを弾く',
      content: `基準音 0 のメジャースケールを順番に弾きましょう。

<strong>課題：[0, 2, 4, 5, 7, 9, 11, 12] を順番に入力</strong>

キーボードトラックに、1拍ずつ順番に：
- 0⁽⁴⁾ (MIDI 60) → 1拍目
- 2⁽⁴⁾ (MIDI 62) → 2拍目
- 4⁽⁴⁾ (MIDI 64) → 3拍目
- 5⁽⁴⁾ (MIDI 65) → 4拍目
- 7⁽⁴⁾ (MIDI 67) → 5拍目
- 9⁽⁴⁾ (MIDI 69) → 6拍目
- 11⁽⁴⁾ (MIDI 71) → 7拍目
- 0⁽⁵⁾ (MIDI 72) → 8拍目

を置いてください。`,
      targetTrack: 'keyboard',
      expectedNotes: [
        { pitch: 60, start: 0, duration: 1 },
        { pitch: 62, start: 1, duration: 1 },
        { pitch: 64, start: 2, duration: 1 },
        { pitch: 65, start: 3, duration: 1 },
        { pitch: 67, start: 4, duration: 1 },
        { pitch: 69, start: 5, duration: 1 },
        { pitch: 71, start: 6, duration: 1 },
        { pitch: 72, start: 7, duration: 1 },
      ],
      hints: [
        '2-2-1-2-2-2-1 のパターンで音が上がっていきます',
        '最後の 0⁽⁵⁾ は1オクターブ上の基準音',
      ],
    },
    {
      id: 'step7',
      type: 'theory',
      title: 'スケール内とスケール外',
      content: `曲を作るとき、基本は<strong>スケール内の音</strong>を使います。

基準音 0 のメジャースケール: [0, 2, 4, 5, 7, 9, 11]

<strong>スケール内（使いやすい）:</strong>
0, 2, 4, 5, 7, 9, 11

<strong>スケール外（注意が必要）:</strong>
1, 3, 6, 8, 10

スケール外の音は：
- 緊張感を出したいとき
- 転調するとき
- 意図的なアクセント

に使います。基本はスケール内で作曲すると安全です。`,
    },
    {
      id: 'step8',
      type: 'theory',
      title: 'メジャースケールの響き',
      content: `メジャースケールは<strong>明るい響き</strong>が特徴です。

<strong>理由:</strong>
基準音から距離4の位置に音がある
→ 距離4 = 明るい響き
→ メジャー和音 [0, 4, 7] がスケール内で作れる

<strong>アニソンでの使用例:</strong>
- 明るいOP曲
- 前向きな歌詞の曲
- 日常パートのBGM
- ハッピーエンドのシーン

<strong>代表的なアニソン:</strong>
多くのアイドル系アニメ、日常系アニメのOPは
メジャースケールで作られています。`,
    },
    {
      id: 'step9',
      type: 'quiz',
      title: '確認クイズ：スケール判定',
      content: 'メジャースケールに含まれるか判定しましょう。',
      question: '基準音 0 のメジャースケールに「6」は含まれる？',
      options: [
        '含まれる',
        '含まれない',
      ],
      correctIndex: 1,
      explanation: '基準音 0 のメジャースケールは [0, 2, 4, 5, 7, 9, 11]。6 は含まれていません。',
    },
    {
      id: 'step10',
      type: 'theory',
      title: 'まとめ',
      content: `お疲れ様でした！

<strong>このレッスンで学んだこと：</strong>

1. <strong>スケール = 音のパレット</strong>
   - 12音から7音を選ぶ
   - 曲に統一感を出す

2. <strong>メジャースケール</strong>
   - パターン: [0, 2, 4, 5, 7, 9, 11]
   - 間隔: 2-2-1-2-2-2-1
   - 明るい響き

3. <strong>移調</strong>
   - 各音に基準音を足す（mod 12）
   - パターンは変わらない

<strong>次のレッスン：</strong>
マイナースケールを学びます。`,
    },
  ],
}
