# Webアプリの基礎 - 完全初心者向け

このドキュメントは「そもそもWebアプリって何？」というレベルから説明します。

## 目次

1. [Webアプリとは何か](#webアプリとは何か)
2. [フロントエンドとバックエンド](#フロントエンドとバックエンド)
3. [通信の仕組み（HTTP）](#通信の仕組みhttp)
4. [API とは何か](#api-とは何か)
5. [このアプリの全体像](#このアプリの全体像)

---

## Webアプリとは何か

### 普通のアプリとの違い

```
【普通のアプリ（ネイティブアプリ）】
┌─────────────────────────────────┐
│  あなたのパソコン              │
│  ┌───────────────────────────┐ │
│  │  Word, Excel, Photoshop   │ │
│  │  （ダウンロードして使う）   │ │
│  └───────────────────────────┘ │
└─────────────────────────────────┘

【Webアプリ】
┌─────────────────────────────────┐
│  あなたのパソコン              │
│  ┌───────────────────────────┐ │
│  │  ブラウザ（Chrome等）     │ │    インターネット     ┌──────────┐
│  │  http://localhost:5173 ──│─│──────────────────────▶│ サーバー │
│  └───────────────────────────┘ │                       └──────────┘
└─────────────────────────────────┘
```

**Webアプリの特徴:**
- ダウンロード不要（ブラウザで開くだけ）
- どのパソコンでも同じように動く
- 常に最新版が使える

**このアプリの場合:**
- ブラウザで `http://localhost:5173` を開くと使える
- 自分のパソコン上で動くので「localhost（ローカルホスト）」

---

## フロントエンドとバックエンド

Webアプリは大きく2つに分かれます。

```
┌─────────────────────────────────────────────────────────────────┐
│                         Webアプリ                               │
├────────────────────────────┬────────────────────────────────────┤
│     フロントエンド         │         バックエンド               │
│                            │                                    │
│   【あなたが見える部分】    │   【あなたからは見えない部分】     │
│                            │                                    │
│   ・ボタン                 │   ・データベース                   │
│   ・入力欄                 │   ・計算処理                       │
│   ・画面のデザイン          │   ・外部サービスとの連携            │
│                            │                                    │
│   例: YouTubeの画面         │   例: 動画の保存場所               │
│                            │                                    │
├────────────────────────────┴────────────────────────────────────┤
│                            通信                                 │
│   フロント ←───── HTTP リクエスト/レスポンス ─────→ バックエンド │
└─────────────────────────────────────────────────────────────────┘
```

### フロントエンド（クライアント側）

**役割:** ユーザーが直接触る部分

```
【例: 楽曲検索機能】

┌─────────────────────────────────────┐
│ 楽曲検索                     [🔍]   │
├─────────────────────────────────────┤
│                                     │
│  ┌───────────────────────────────┐ │
│  │ 「バンドリ」を入力 [検索]     │ │  ← 入力欄とボタン（フロント）
│  └───────────────────────────────┘ │
│                                     │
│  検索結果:                          │  ← 結果表示（フロント）
│  1. バンドリ - キズナミュージック    │
│  2. バンドリ - Roselia 曲まとめ     │
│                                     │
└─────────────────────────────────────┘
```

**このアプリのフロントエンド:**
- **言語:** TypeScript（JavaScriptをより安全にしたもの）
- **ライブラリ:** React（画面の部品を組み合わせて作る）
- **ポート:** 5173（`http://localhost:5173`）

### バックエンド（サーバー側）

**役割:** 見えないところで動く処理

```
【例: 楽曲検索の裏側】

フロントからリクエストが来る
        │
        ▼
┌─────────────────────────────────────┐
│ バックエンド（サーバー）            │
│                                     │
│ 1. 「バンドリ」という文字を受け取る │
│ 2. YouTube API に検索を依頼        │
│ 3. 結果をまとめてフロントに返す    │
│                                     │
└─────────────────────────────────────┘
```

**このアプリのバックエンド:**
- **言語:** Python
- **フレームワーク:** FastAPI
- **ポート:** 8000（`http://localhost:8000`）

---

## 通信の仕組み（HTTP）

フロントとバックエンドは「HTTPリクエスト」でやりとりします。

### リクエストとレスポンス

```
【例: 楽曲を検索する場合】

あなたが「検索」ボタンを押す
        │
        ▼
┌──────────────────────┐
│ フロントエンド       │
│                      │
│ 「バンドリ」を検索   │
│ してください！       │───────▶ リクエスト（お願い）
│                      │
└──────────────────────┘

                               ┌──────────────────────┐
                               │ バックエンド         │
                               │                      │
            レスポンス（結果） ◀─│ 検索結果はこれです  │
                               │                      │
                               └──────────────────────┘

┌──────────────────────┐
│ フロントエンド       │
│                      │
│ 結果を画面に表示     │
│                      │
└──────────────────────┘
```

### HTTPメソッド（リクエストの種類）

| メソッド | 用途 | 例 |
|---------|------|-----|
| GET | データを取得 | 曲を検索する |
| POST | データを送信 | 新しい曲を保存 |
| PUT | データを更新 | 曲情報を変更 |
| DELETE | データを削除 | 曲を削除 |

**日常生活で例えると:**
- GET = 「メニューを見せてください」
- POST = 「この料理を注文します」
- PUT = 「注文を変更します」
- DELETE = 「注文をキャンセルします」

---

## API とは何か

### APIの意味

**API = Application Programming Interface**

難しく見えますが、簡単に言うと「お店のメニュー」のようなものです。

```
【レストランの例】

お客さん                    キッチン
┌──────────────┐            ┌──────────────┐
│              │            │              │
│ メニューを見る │◀──メニュー───│              │
│              │            │              │
│「カレー」と注文│────注文────▶│  カレー作る   │
│              │            │              │
│ カレーを受け取る│◀──カレー───│              │
│              │            │              │
└──────────────┘            └──────────────┘

【Webアプリの例】

フロントエンド                バックエンド
┌──────────────┐            ┌──────────────┐
│              │            │              │
│ APIを見る    │◀─API定義─── │              │
│              │            │              │
│ /search?q=xxx│────リクエスト─▶│  曲を検索   │
│              │            │              │
│ 結果を受け取る│◀──JSON──── │              │
│              │            │              │
└──────────────┘            └──────────────┘
```

### このアプリのAPI（メニュー）

| エンドポイント（URL） | やること |
|---------------------|---------|
| `/api/v1/song-analysis/search?query=xxx` | 曲を検索 |
| `/api/v1/song-analysis/analyze/{id}` | 曲を解析 |
| `/api/v1/theory/explain` | 理論を解説 |

### JSONとは

APIでやり取りするデータ形式。テキストなので人間も読める。

```json
{
  "success": true,
  "data": {
    "results": [
      {
        "id": "abc123",
        "title": "バンドリ - キズナミュージック",
        "channel": "BanG Dream! Official"
      }
    ]
  }
}
```

**構造:**
- `{ }` = オブジェクト（情報のまとまり）
- `[ ]` = 配列（情報のリスト）
- `"キー": "値"` = データの項目

---

## このアプリの全体像

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                               あなたのパソコン                               │
│                                                                             │
│  ┌──────────────────────┐                    ┌──────────────────────┐      │
│  │     ブラウザ          │                    │   バックエンド        │      │
│  │  (Chrome, Safari等)   │                    │   (Python/FastAPI)   │      │
│  │                       │   HTTPリクエスト   │                      │      │
│  │ http://localhost:5173 │◀──────────────────▶│ http://localhost:8000│      │
│  │                       │                    │                      │      │
│  │ ┌───────────────────┐│                    │ ┌──────────────────┐ │      │
│  │ │ フロントエンド    ││                    │ │ YouTube API 連携 │ │      │
│  │ │ (React/TypeScript)││                    │ │ Demucs (分離)    │ │      │
│  │ │                   ││                    │ │ Basic Pitch     │ │      │
│  │ │ ・ピアノロール     ││                    │ │ Gemini (AI解説) │ │      │
│  │ │ ・ドラムグリッド   ││                    │ └──────────────────┘ │      │
│  │ │ ・楽曲検索         ││                    │                      │      │
│  │ └───────────────────┘│                    └──────────────────────┘      │
│  └──────────────────────┘                                                   │
│                                                                             │
│  ┌──────────────────────┐                                                   │
│  │  Docker コンテナ      │                                                   │
│  │  VOICEVOX (音声合成) │                                                   │
│  │  port: 50021         │                                                   │
│  └──────────────────────┘                                                   │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
                │
                │ インターネット経由
                ▼
        ┌──────────────────┐
        │ 外部サービス      │
        │ ・YouTube        │
        │ ・Gemini AI      │
        └──────────────────┘
```

### 処理の流れ（楽曲解析の場合）

```
1. あなたが「バンドリ」と検索
   ↓
2. フロントエンド → バックエンドにリクエスト送信
   ↓
3. バックエンド → YouTube API で動画を検索
   ↓
4. 検索結果がフロントエンドに返ってくる
   ↓
5. あなたが曲を選んで「解析」ボタンを押す
   ↓
6. バックエンド:
   a. yt-dlp で音声をダウンロード（5-10秒）
   b. Demucs で楽器分離（1-2分）
   c. Basic Pitch でMIDI変換（10-20秒）
   d. Gemini で解説文を生成
   ↓
7. 結果がフロントエンドに返ってくる
   ↓
8. ピアノロールに表示される
```

---

## まとめ

| 用語 | 意味 | このアプリでは |
|-----|------|--------------|
| フロントエンド | 画面側 | React + TypeScript |
| バックエンド | サーバー側 | Python + FastAPI |
| HTTP | 通信の約束事 | GET, POST など |
| API | 機能のメニュー | /api/v1/... |
| JSON | データ形式 | `{"key": "value"}` |

## 次に読むべきドキュメント

1. [02-TYPESCRIPT-BASICS.md](./02-TYPESCRIPT-BASICS.md) - TypeScript入門
2. [03-REACT-BASICS.md](./03-REACT-BASICS.md) - React入門
3. [04-PYTHON-FASTAPI.md](./04-PYTHON-FASTAPI.md) - Python/FastAPI入門

## 参考文献

### Web開発の基礎

- [MDN Web Docs](https://developer.mozilla.org/ja/)
- [Qiita: Web開発の基礎](https://qiita.com/mogamin3/items/2c8eb12b6dba50bf4cff)
- [Qiita: HTTP入門](https://qiita.com/koheiyamaguchi0203/items/5777c4653a01ae4c7b06)
- [Qiita: REST API 入門](https://qiita.com/TakahiroSakoda/items/ec1f55c2aae4986a51b7)

### JSON

- [JSON 公式](https://www.json.org/json-ja.html)
- [Qiita: JSON入門](https://qiita.com/chihiro/items/dd1d90885a6de69c9fb7)
